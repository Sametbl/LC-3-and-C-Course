; We tried to optimized the Subroutine to uses the least Registers as possible. 
; Registers involved: R1, R2, R3
; The Subroutine performs R2 / R1. 
; Quotient is stored in x5000  (Register: R3,    Label: QUOTI)
; Remainder is stored in x5001 (Register: None,  Label: REMAIN)

DIVISION    ST  R1, num1       ; Store R1, R2
            ST  R2, num2
            NOT R2, R2
            ADD R2, R2, #1     ; 2's complement R2 = -R2

    LOOP    ST  R1, tmp        ; Temporary save the previous value of R1 before it becomes Negative
            ADD R3, R3, #1     ; R3 = number of substraction
            ADD R1, R1, R2     ; R1 = R1 - R2  
            BRzp LOOP          ; if R1 >= 0, continue substracting

            ADD R3, R3, #-1    ; Eliminate the quotient count of substraction that results in Negative
            STI R3, QUOTI      ; Store in x5000
            LD  R1, tmp        ; Load value of Remainder before it results in Negative
            STI R1, REMAIN     ; Store in x5001
            LD  R1, num1       ; Return the initial value of R1, R2 .Because after an "Intruction", the values of Registers should be untouched
            LD  R2, num2       
            RET

tmp      .BLKW x0001
num1     .BLKW x0001
num2     .BLKW x0001 
QUOTI    .FILL x5000
REMAIN   .FILL x5001
